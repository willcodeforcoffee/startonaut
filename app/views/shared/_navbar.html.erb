<nav class="bg-rich-black-950 border-b border-bright-turquoise-600 fixed top-0 left-0 right-0 z-50" data-controller="navbar">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-16">
      <!-- Logo and title -->
      <div class="flex items-center space-x-3">
        <div class="text-bright-turquoise-300">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z" />
          </svg>
        </div>
        <% if Rails.env.production? %>
          <%= link_to root_path, class: "text-bright-turquoise-300 text-xl font-pt-sans-narrow font-bold hover:text-bright-turquoise-300 transition-colors" do %>
            Startonaut
          <% end %>
        <% else %>
          <%= link_to root_path, class: "text-red-cmyk-600 text-xl font-pt-sans-narrow font-bold hover:text-bright-turquoise-300 transition-colors" do %>
            Startonaut (Dev)
          <% end %>
        <% end %>
      </div>
      <!-- Desktop navigation -->
      <div class="hidden md:flex items-center space-x-8">
        <% if authenticated? %>
          <% Current&.user&.tags&.favorites&.each do |tag| %>
            <%= link_to tag_path(tag), class: "text-baby-powder-50 hover:text-bright-turquoise-300 transition-colors #{'text-bright-turquoise-300' if controller_name == 'tags'}" do %>
              #<%= tag.name %>
            <% end %>
          <% end %>
          <%= link_to pages_path, class: "text-baby-powder-50 hover:text-bright-turquoise-300 transition-colors #{'text-bright-turquoise-300' if controller_name == 'pages'}" do %>
            Start Page
          <% end %>
          <!-- Settings Dropdown -->
          <div class="relative" data-controller="dropdown">
            <button 
              type="button"
              class="text-baby-powder-50 hover:text-bright-turquoise-300 transition-colors flex items-center space-x-1"
              data-action="click->dropdown#toggle"
              >
              <span>Settings</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <!-- Dropdown Menu -->
            <div 
              class="absolute right-0 mt-2 w-48 bg-rich-black-900 rounded-md shadow-lg py-1 z-10 hidden"
              data-dropdown-target="menu"
            >
              <%= link_to account_index_path, class: "block px-4 py-2 text-sm text-bright-turquoise-300 hover:bg-rich-black-800 transition-colors #{'bg-rich-black-800' if controller_name == 'account'}" do %>
                Account
              <% end %>
              <%= link_to bookmarks_path, class: "block px-4 py-2 text-sm text-bright-turquoise-300 hover:bg-rich-black-800 transition-colors #{'bg-rich-black-800' if controller_name == 'bookmarks'}" do %>
                Bookmarks
              <% end %>
              <%= link_to tags_path, class: "block px-4 py-2 text-sm text-bright-turquoise-300 hover:bg-rich-black-800 transition-colors #{'bg-rich-black-800' if controller_name == 'tags'}" do %>
                Tags
              <% end %>
              <hr class="my-1 border-gray-600">
              <%= link_to session_path, method: :delete, data: { turbo_method: :delete }, class: "block px-4 py-2 text-sm text-bright-turquoise-300 hover:bg-rich-black-800 transition-colors" do %>
                Logout
              <% end %>
            </div>
          </div>
        <% else %>
          <%= link_to new_session_path, class: "text-baby-powder-50 hover:text-bright-turquoise-300 transition-colors" do %>
            Login
          <% end %>
          <%= link_to new_registration_path, class: "text-baby-powder-50 hover:text-bright-turquoise-300 transition-colors" do %>
            Register
          <% end %>
        <% end %>
      </div>
      <!-- Mobile menu button -->
      <div class="md:hidden">
        <button
          type="button"
          class="text-baby-powder-50 hover:text-bright-turquoise-300 focus:outline-none focus:text-bright-turquoise-300 transition-colors"
          data-navbar-target="menuButton"
          data-action="click->navbar#toggleMenu"
          aria-label="Toggle menu"
          >
          <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-navbar-target="menuIcon">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
          <svg class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-navbar-target="closeIcon">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>
    <!-- Mobile menu -->
    <div class="md:hidden hidden" data-navbar-target="mobileMenu">
      <div class="px-2 pt-2 pb-3 space-y-1 border-t border-bright-turquoise-600">
        <% if authenticated? %>
          <% Current&.user&.tags&.favorites&.each do |tag| %>
            <%= link_to tag_path(tag), class: "block px-3 py-2 text-baby-powder-50 hover:text-bright-turquoise-300 hover:bg-rich-black-900 rounded transition-colors #{'text-bright-turquoise-300 bg-rich-black-900' if controller_name == 'tags'}" do %>
              #<%= tag.name %>
            <% end %>
          <% end %>
          <%= link_to pages_path, class: "block px-3 py-2 text-baby-powder-50 hover:text-bright-turquoise-300 hover:bg-rich-black-900 rounded transition-colors #{'text-bright-turquoise-300 bg-rich-black-900' if controller_name == 'pages'}" do %>
            Start Page
          <% end %>
          <!-- Mobile Settings Dropdown -->
          <div data-controller="dropdown">
            <button 
              type="button"
              class="w-full text-left px-3 py-2 text-baby-powder-50 hover:text-bright-turquoise-300 hover:bg-rich-black-900 rounded transition-colors flex items-center justify-between"
              data-action="click->dropdown#toggle"
              >
              <span>Settings</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <!-- Mobile Dropdown Menu -->
            <div 
              class="ml-4 mt-1 hidden"
              data-dropdown-target="menu"
            >
              <%= link_to account_index_path, class: "block px-3 py-2 text-baby-powder-50 hover:text-bright-turquoise-300 hover:bg-rich-black-900 rounded transition-colors #{'text-bright-turquoise-300 bg-rich-black-900' if controller_name == 'account'}" do %>
                Account
              <% end %>
            </button>
            <!-- Mobile Dropdown Menu -->
            <div 
              class="ml-4 mt-1 hidden"
              data-dropdown-target="menu"
            >
              <%= link_to account_index_path, class: "block px-3 py-2 text-baby-powder-50 hover:text-bright-turquoise-300 hover:bg-rich-black-900 rounded transition-colors #{'text-bright-turquoise-300 bg-rich-black-900' if controller_name == 'account'}" do %>
                Account
              <% end %>
              <%= link_to bookmarks_path, class: "block px-3 py-2 text-baby-powder-50 hover:text-bright-turquoise-300 hover:bg-rich-black-900 rounded transition-colors #{'text-bright-turquoise-300 bg-rich-black-900' if controller_name == 'bookmarks'}" do %>
                Bookmarks
              <% end %>
              <%= link_to tags_path, class: "block px-3 py-2 text-baby-powder-50 hover:text-bright-turquoise-300 hover:bg-rich-black-900 rounded transition-colors #{'text-bright-turquoise-300 bg-rich-black-900' if controller_name == 'tags'}" do %>
                Tags
              <% end %>
              <%= link_to session_path, method: :delete, data: { turbo_method: :delete }, class: "block px-3 py-2 text-baby-powder-50 hover:text-red-400 hover:bg-rich-black-900 rounded transition-colors" do %>
                Logout
              <% end %>
            </div>
          </div>
        <% else %>
          <%= link_to new_session_path, class: "block px-3 py-2 text-baby-powder-50 hover:text-bright-turquoise-300 hover:bg-rich-black-900 rounded transition-colors" do %>
            Login
          <% end %>
          <%= link_to new_registration_path, class: "block px-3 py-2 text-baby-powder-50 hover:text-bright-turquoise-300 hover:bg-rich-black-900 rounded transition-colors" do %>
            Register
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</nav>
